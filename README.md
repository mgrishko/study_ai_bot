# Aiogram 3.0 Чат-бот - Магазин верхнього одягу

Чат-бот для магазину верхнього одягу, створений на Python з використанням бібліотеки Aiogram 3.0 та PostgreSQL.

## Вимоги

- Python 3.14
- PostgreSQL 12+
- Aiogram 3.15.0
- asyncpg 0.30.0
- python-dotenv 1.0.0

## Структура проекту

```
aiogram_project/
├── bot.py                 # Головний файл запуску бота
├── config.py              # Конфігурація та налаштування
├── database.py            # Робота з PostgreSQL
├── .env                   # Змінні середовища
├── requirements.txt       # Залежності
├── README.md             # Документація
├── handlers/             # Обробники команд та callbacks
│   ├── __init__.py
│   ├── common.py        # Загальні команди (/start, /help, /info)
│   ├── user.py          # Користувацькі функції (каталог, замовлення)
│   └── admin.py         # Адміністрування
├── keyboards/           # Інлайн-клавіатури
│   ├── __init__.py
│   ├── inline.py        # Клавіатури для користувачів
│   └── admin.py         # Клавіатури для адміністраторів
├── filters/             # Фільтри для обробників
│   ├── __init__.py
│   └── admin.py         # Фільтр перевірки адміністратора
└── utils/               # Допоміжні функції
```

## Встановлення

1. Створіть віртуальне середовище:
```bash
python3.14 -m venv venv
source venv/bin/activate
```

2. Встановіть залежності:
```bash
pip install -r requirements.txt
```

3. Встановіть та налаштуйте PostgreSQL:
```bash
# macOS
brew install postgresql@18
brew services start postgresql@18

# Створіть базу даних та користувача
/opt/homebrew/opt/postgresql@18/bin/createdb shop_bot
/opt/homebrew/opt/postgresql@18/bin/createuser shop_bot_user

# Надайте права
/opt/homebrew/opt/postgresql@18/bin/psql -d shop_bot -c "GRANT ALL PRIVILEGES ON SCHEMA public TO shop_bot_user;"
```

4. Налаштуйте конфігурацію в `.env`:
   - `BOT_TOKEN` - токен від [@BotFather](https://t.me/BotFather)
   - `DB_*` - параметри PostgreSQL
   - `ADMIN_IDS` - ID адміністраторів через кому (дізнайтеся свій ID через [@userinfobot](https://t.me/userinfobot))

## Запуск

```bash
python bot.py
```

## Функціонал

### Для користувачів:
- `/start` - Початок роботи з ботом
- `/help` - Список команд
- `/info` - Інформація про бот
- `/catalog` - Каталог товарів з інлайн-кнопками
- `/order` - Оформлення замовлення
- `/categories` - Категорії товарів
- `/myorders` - Мої замовлення

### Для адміністраторів:
- `/admin` - Панель адміністратора
- **Статистика** - Перегляд статистики (користувачі, замовлення, дохід)
- **Замовлення** - Управління замовленнями (перегляд, зміна статусу)
- **Товари** - Управління товарами (додавання, редагування, видалення)
- **Користувачі** - Перегляд списку користувачів

## База даних PostgreSQL

Структура таблиць:
- **products** - товари (назва, опис, ціна, категорія, залишок)
- **orders** - замовлення зі статусами (pending, confirmed, shipped, delivered, cancelled)
- **users** - користувачі бота

При першому запуску автоматично створюються таблиці та додаються початкові товари.

## Розробка

Проект використовує модульну архітектуру з роутерами для кращої організації коду:
- **Роутери** - окремі модулі для різних функцій
- **Фільтри** - перевірка прав доступу
- **Клавіатури** - винесені в окремі модулі
- **Конфігурація** - централізоване управління налаштуваннями
